--+ server-message on
-- Verification for CBRD-25472

-- with default value & special character
create or replace procedure test_proc1(a int := 1 comment 'test sp char 123`~!@#$%^&*()_-=+\;,./?:;"[]{}\<>')
as
begin
    dbms_output.put_line('proc1 param: ' || a);
end;

call test_proc1();


-- without default value
create or replace procedure test_proc2(a int comment 'param comment without default value')
as
begin
    dbms_output.put_line('proc2 param: ' || a);
    test_proc1(3);
end;

call test_proc2(10);


-- recursive
create or replace procedure test_proc3(num int comment 'recursive procedure')
as
begin
    if num = 0 then
        dbms_output.put_line('recursive done');
    else
        test_proc3(num-1);
    end if;
    dbms_output.put_line('param: ' || num);
end;

call test_proc3(5);


-- maximum test
-- compile error: length over
create or replace procedure test_proc4(num int comment '_0123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890')
as
begin
    dbms_output.put_line('maximum comment length over');
end;
-- maximum length: 1024 byte
create or replace procedure test_proc4(num int comment '0123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890123456768901234567689012345676890')
as
begin
    dbms_output.put_line('maximum comment length');
end;

call test_proc4(99);


select sp_name, arg_name, comment from db_stored_procedure_args where comment is not null order by sp_name;

drop procedure test_proc1;
drop procedure test_proc2;
drop procedure test_proc3;
drop procedure test_proc4;

--+ server-message off